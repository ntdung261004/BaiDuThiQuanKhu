/* === CSS HOÀN CHỈNH CHO LAYOUT DASHBOARD === */

/* --- 1. THIẾT LẬP KHUNG CHÍNH CỦA TRANG --- */
#page-content-wrapper {
    height: 100vh;
    overflow: hidden; /* Cấm toàn bộ trang cuộn */
    display: flex;
    flex-direction: column;
    background-color: #f4f7f6; /* Thêm màu nền nhẹ cho toàn trang */
}

/* --- 2. THIẾT LẬP CONTAINER GRID CHÍNH --- */
#session-dashboard-grid {
    flex-grow: 1; /* Lấp đầy không gian còn lại */
    min-height: 0; /* Bắt buộc để layout co dãn đúng */

    display: grid;
    grid-template-columns: 2fr 2fr 1.5fr;
    /* Tỷ lệ hàng: Hàng trên cao gấp 3 lần hàng dưới (~75% - 25%) */
    grid-template-rows: 3fr 1fr;
    
    gap: 1rem; /* Khoảng cách giữa các khung */
    
    /* Bản đồ layout */
    grid-template-areas:
        "results    livestream shooters"
        "history    new_frame  overview";
}

/* --- 3. QUY TẮC AN TOÀN & GÁN VỊ TRÍ --- */
/* Quy tắc này ngăn nội dung lớn phá vỡ layout của lưới */
.grid-item {
    min-width: 0;
    min-height: 0;
    overflow: hidden; /* Đảm bảo nội dung không tràn ra khỏi ô lưới */
}

/* Gán mỗi div container vào đúng khu vực */
#grid-livestream { grid-area: livestream; }
#grid-results   { grid-area: results; }
#grid-shooters  { grid-area: shooters; }
#grid-history   { grid-area: history; }
#grid-new-frame { grid-area: new_frame; }
#grid-overview  { grid-area: overview; }

/* --- 4. STYLE CHUNG CHO CÁC KHUNG (CARD) --- */
.grid-item .card {
    height: 100%;
    width: 100%;
    border: none;
    border-radius: 0.5rem;
    box-shadow: 0 4px 6px rgba(0,0,0,0.05);
    display: flex;
    flex-direction: column;
}

.grid-item .card-header {
    background-color: #fff;
    border-bottom: 1px solid #dee2e6;
    font-weight: 600;
    font-size: 0.9rem;
    padding: 0.6rem 1rem;
}

.grid-item .card-body {
    display: flex;
    flex-direction: column;
    flex-grow: 1;
    overflow: hidden; /* Sửa lại lỗi cuộn */
    padding: 0.75rem;
}

/* --- 5. STYLE CHI TIẾT CHO CÁC THÀNH PHẦN --- */

/* Khung ảnh kết quả */
.target-img-container-session {
    flex-grow: 1;
    min-height: 0; 
    display: flex;
    align-items: center;
    justify-content: center;
}
#target-image, #video-feed {
    max-width: 100%;
    max-height: 100%;
    object-fit: contain;
    /* --- BỔ SUNG CÁC THUỘC TÍNH NÀY --- */
    width: auto;  /* Cho phép ảnh có chiều rộng tự nhiên */
    height: auto; /* Cho phép ảnh có chiều cao tự nhiên */
    display: block; /* Biến ảnh thành block-level để margin auto có tác dụng */
    margin: auto; /* <<< DÒNG NÀY SẼ CĂN GIỮA NỘI DUNG ẢNH/VIDEO >>> */
    /* --- KẾT THÚC BỔ SUNG --- */
}

/* Thanh cuộn nội bộ */
.grid-item .card-body.shooter-list-scroll,
.grid-item .card-body.shot-status-scroll {
    overflow-y: auto;
    flex-grow: 1;
}

/* Tùy chỉnh thanh cuộn cho đẹp mắt hơn */
.shooter-list-scroll::-webkit-scrollbar,
.shot-status-scroll::-webkit-scrollbar {
  width: 5px;
}
.shooter-list-scroll::-webkit-scrollbar-thumb,
.shot-status-scroll::-webkit-scrollbar-thumb {
  background-color: #ced4da;
  border-radius: 3px;
}

/* Cỡ chữ và khoảng cách */
#session-dashboard-grid {
    font-size: 0.85rem;
}
#shot-score {
    font-size: 1.75rem !important;
}
#soldiers-list .list-group-item {
    font-size: 0.8rem;
    padding: 0.6rem 0.75rem;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}
#soldiers-list .list-group-item.active {
    font-weight: bold;
}

/* Ghi đè lên nền đen của khung livestream */
#grid-livestream .card-body.bg-dark {
    background-color: transparent !important;
    border: none;
    padding: 0; /* Bỏ padding để video/ảnh có thể chiếm toàn bộ không gian */
}

